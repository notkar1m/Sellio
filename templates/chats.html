{% extends "base.html"%}

{%block head%}
<link rel="stylesheet" href="static/css/index.css">
<link rel="stylesheet" href="static/css/chats.css">
<script>
	var chats =  {{chats|safe}}
	var accName = "{{username}}"
</script>
<script src="static/js/chats.js"></script>
{%endblock%}

{%block title%}Sellio - Chats {%endblock%}

{%block navbar%}

<img src="/static/logo.png" onclick="window.location.pathname = '/'" id="logo">
 <a href="/" class="navbar-links">Home</a>
       <!-- <img src="/static/logo.png" id="logo"> -->
      <a href="/chats" class="navbar-links">Chats</a>
      <a href="/favorites" class="navbar-links">Favorites</a>
      <div class="new-listing-btn" onclick="window.location.href = '/new-listing'"><i class="fas fa-plus-circle"></i><span>New Listing</span></div>
      <!-- <img onclick="$('#user-opts').toggle()"id="pfp" src="https://api-private.atlassian.com/users/aa7543e682dff486562017fe2fedc6c0/avatar">  -->
                   <img  onclick="$('#user-opts').toggle()" id="pfp" src="/static/pfps/{{username}}.jpg?r={{r}}" onerror="if (this.src != 'https://api-private.atlassian.com/users/aa7543e682dff486562017fe2fedc6c0/avatar') this.src = 'https://api-private.atlassian.com/users/aa7543e682dff486562017fe2fedc6c0/avatar';">
      <div id="user-opts" style="display:none">
        <h3 id="user-name">Logged as {{username}}</h3>
        <div class="options" onclick="window.location.href = '/user/{{username}}'"><i class="fas fa-user-circle"></i> Profile</div>
        <div class="options"><i class="fas fa-cog"></i> Settings</div>
        <div class="options"  onclick="window.location.href = '/logout'"><i class="fas fa-sign-out-alt"></i> <span style="color: #FF6868;">Log out</span></div>
      </div>
{%endblock%}

   

{%block content%}
	<h2>Chats</h2>

	<div id="container">
		<div id="contact-list">
			{%for contact in chats%}
			<div class="contact" id="{{contact}}" onclick="loadMessages('{{contact}}')">
				<img src="/static/pfps/{{contact}}.jpg" onerror="if (this.src != 'https://api-private.atlassian.com/users/aa7543e682dff486562017fe2fedc6c0/avatar') this.src = 'https://api-private.atlassian.com/users/aa7543e682dff486562017fe2fedc6c0/avatar';">
				<h3>{{contact}}</h3>
			</div>
			{%endfor%}
			{%if chats|length == 0%}
			<center><h4>No chats yet.</h4></center>
			{%endif%}
			
		</div>

		<div id="messages-container">
			<!-- <div class="message-me"><p>hello</p></div>
			<div class="message-other"><p>hello</p></div>
			 -->
	
		

		</div>
		<div id="send-message-container">
			<input autocomplete="off" type="text" id="message-input" placeholder="Send message...">
			<i class="fas fa-paper-plane" onclick="sendMessage($('#message-input').val())"></i>

		</div>
	</div>
{%endblock%}
